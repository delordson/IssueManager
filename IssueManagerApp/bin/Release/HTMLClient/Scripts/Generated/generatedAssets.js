function CountIssues(n){var t=0,i=n.results;return i.forEach(function(){t=t+1}),t}window.myapp=msls.application,function(n){function i(n){r.call(this,n)}function e(n){r.call(this,n)}function o(n){r.call(this,n)}function s(n){r.call(this,n)}function h(n){r.call(this,n)}function c(n){l.call(this,n)}function p(){a.call(this)}var r=msls.Entity,l=msls.DataService,a=msls.DataWorkspace,u=msls._defineEntity,v=msls._defineDataService,y=msls._defineDataWorkspace,t=msls.DataServiceQuery,f=msls._toODataString;msls._addToNamespace("msls.application",{Issue:u(i,[{name:"Id",type:Number},{name:"IssueTitle",type:String},{name:"DateRaised",type:Date},{name:"IssueDescription",type:String},{name:"IssueOwner",kind:"reference",type:e},{name:"Status",type:String},{name:"Priority",type:String},{name:"IssueType",kind:"reference",type:s},{name:"AssignedTo",kind:"reference",type:e},{name:"IssueImpactAssessment",type:String},{name:"TargetResolutionDate",type:Date},{name:"CorrectiveAction",type:String},{name:"CorrectiveActionCompletionTargetDate",type:Date},{name:"DateCorrectiveActionCompleted",type:Date},{name:"PreventativeAction",type:String},{name:"PreventativeActionCompletionTargetDate",type:Date},{name:"DatePreventativeActionCompleted",type:Date},{name:"DateIssueClosed",type:Date},{name:"FurtherActions",kind:"collection",elementType:o},{name:"IssueComments",kind:"collection",elementType:h},{name:"CreatedBy",type:String,isReadOnly:!0},{name:"Created",type:Date,isReadOnly:!0},{name:"ModifiedBy",type:String,isReadOnly:!0},{name:"Modified",type:Date,isReadOnly:!0},{name:"RowVersion",type:Array}]),Employee:u(e,[{name:"Id",type:Number},{name:"UserName",type:String},{name:"LastName",type:String},{name:"FirstName",type:String},{name:"Email",type:String},{name:"Current",type:Boolean},{name:"FurtherActions",kind:"collection",elementType:o},{name:"IssueAssignments",kind:"collection",elementType:i},{name:"OwnedIssues",kind:"collection",elementType:i},{name:"CreatedBy",type:String,isReadOnly:!0},{name:"Created",type:Date,isReadOnly:!0},{name:"ModifiedBy",type:String,isReadOnly:!0},{name:"Modified",type:Date,isReadOnly:!0},{name:"RowVersion",type:Array}]),FurtherAction:u(o,[{name:"Id",type:Number},{name:"Issue",kind:"reference",type:i},{name:"ActionTitle",type:String},{name:"AssignedTo",kind:"reference",type:e},{name:"ActionOutcome",type:String},{name:"DateAssigned",type:Date},{name:"TargetCompletionDate",type:Date},{name:"PercentCompleted",type:String},{name:"Priority",type:String},{name:"Status",type:String},{name:"DateCompleted",type:Date},{name:"CreatedBy",type:String,isReadOnly:!0},{name:"Created",type:Date,isReadOnly:!0},{name:"ModifiedBy",type:String,isReadOnly:!0},{name:"Modified",type:Date,isReadOnly:!0},{name:"RowVersion",type:Array}]),IssueType:u(s,[{name:"Id",type:Number},{name:"IssueTypeName",type:String},{name:"Issues",kind:"collection",elementType:i},{name:"CreatedBy",type:String,isReadOnly:!0},{name:"Created",type:Date,isReadOnly:!0},{name:"ModifiedBy",type:String,isReadOnly:!0},{name:"Modified",type:Date,isReadOnly:!0},{name:"RowVersion",type:Array}]),IssueComment:u(h,[{name:"Id",type:Number},{name:"Comment",type:String},{name:"CommentDate",type:Date},{name:"Issue",kind:"reference",type:i},{name:"CreatedBy",type:String,isReadOnly:!0},{name:"Created",type:Date,isReadOnly:!0},{name:"ModifiedBy",type:String,isReadOnly:!0},{name:"Modified",type:Date,isReadOnly:!0},{name:"RowVersion",type:Array}]),ApplicationData:v(c,n.rootUri+"/ApplicationData.svc",[{name:"Issues",elementType:i},{name:"Employees",elementType:e},{name:"FurtherActions",elementType:o},{name:"IssueTypes",elementType:s},{name:"IssueComments",elementType:h}],[{name:"Issues_SingleOrDefault",value:function(i){return new t({_entitySet:this.Issues},n.rootUri+"/ApplicationData.svc/Issues(Id="+f(i,"Int32?")+")")}},{name:"Employees_SingleOrDefault",value:function(i){return new t({_entitySet:this.Employees},n.rootUri+"/ApplicationData.svc/Employees(Id="+f(i,"Int32?")+")")}},{name:"FurtherActions_SingleOrDefault",value:function(i){return new t({_entitySet:this.FurtherActions},n.rootUri+"/ApplicationData.svc/FurtherActions(Id="+f(i,"Int32?")+")")}},{name:"IssueTypes_SingleOrDefault",value:function(i){return new t({_entitySet:this.IssueTypes},n.rootUri+"/ApplicationData.svc/IssueTypes(Id="+f(i,"Int32?")+")")}},{name:"IssueComments_SingleOrDefault",value:function(i){return new t({_entitySet:this.IssueComments},n.rootUri+"/ApplicationData.svc/IssueComments(Id="+f(i,"Int32?")+")")}},{name:"OverDueIssues",value:function(){return new t({_entitySet:this.Issues},n.rootUri+"/ApplicationData.svc/OverDueIssues()",{})}},{name:"IssuesDueToday",value:function(){return new t({_entitySet:this.Issues},n.rootUri+"/ApplicationData.svc/IssuesDueToday()",{})}},{name:"InProgressIssues",value:function(){return new t({_entitySet:this.Issues},n.rootUri+"/ApplicationData.svc/InProgressIssues()",{})}},{name:"UnassignedIssues",value:function(){return new t({_entitySet:this.Issues},n.rootUri+"/ApplicationData.svc/UnassignedIssues()",{})}},{name:"MyIssues",value:function(){return new t({_entitySet:this.Issues},n.rootUri+"/ApplicationData.svc/MyIssues()",{})}},{name:"MyFurtherActions",value:function(){return new t({_entitySet:this.FurtherActions},n.rootUri+"/ApplicationData.svc/MyFurtherActions()",{})}}]),DataWorkspace:y(p,[{name:"ApplicationData",type:c}])})}(msls.application),function(n){function f(t,r){r||(r=new n.DataWorkspace),i.call(this,r,"AddEditEmployee",t)}function e(t,r){r||(r=new n.DataWorkspace),i.call(this,r,"AddEditFurtherAction",t)}function o(t,r){r||(r=new n.DataWorkspace),i.call(this,r,"AddEditIssue",t)}function s(t,r){r||(r=new n.DataWorkspace),i.call(this,r,"AddEditIssueComment",t)}function h(t,r){r||(r=new n.DataWorkspace),i.call(this,r,"AddEditIssueType",t)}function c(t,r){r||(r=new n.DataWorkspace),i.call(this,r,"BrowseEmployees",t)}function l(t,r){r||(r=new n.DataWorkspace),i.call(this,r,"BrowseIssues",t)}function a(t,r){r||(r=new n.DataWorkspace),i.call(this,r,"BrowseIssueTypes",t)}function v(t,r){r||(r=new n.DataWorkspace),i.call(this,r,"BrowseMyFurtherActions",t)}function y(t,r){r||(r=new n.DataWorkspace),i.call(this,r,"BrowseMyIssues",t)}function p(t,r){r||(r=new n.DataWorkspace),i.call(this,r,"Home",t)}function w(t,r){r||(r=new n.DataWorkspace),i.call(this,r,"MobileHome",t)}var i=msls.Screen,r=msls._defineScreen,b=msls.DataServiceQuery,t=msls._toODataString,u=msls._defineShowScreen;msls._addToNamespace("msls.application",{AddEditEmployee:r(f,[{name:"Employee",kind:"local",type:n.Employee},{name:"IssueAssignments",kind:"collection",elementType:n.Issue,getNavigationProperty:function(){return this.owner.Employee?this.owner.Employee.details.properties.IssueAssignments:null},appendQuery:function(){return this.expand("IssueType")}},{name:"FurtherActions",kind:"collection",elementType:n.FurtherAction,getNavigationProperty:function(){return this.owner.Employee?this.owner.Employee.details.properties.FurtherActions:null},appendQuery:function(){return this.expand("Issue")}}],[]),AddEditFurtherAction:r(e,[{name:"FurtherAction",kind:"local",type:n.FurtherAction}],[]),AddEditIssue:r(o,[{name:"Issue",kind:"local",type:n.Issue},{name:"IssueComments",kind:"collection",elementType:n.IssueComment,getNavigationProperty:function(){return this.owner.Issue?this.owner.Issue.details.properties.IssueComments:null},appendQuery:function(){return this}},{name:"FurtherActions",kind:"collection",elementType:n.FurtherAction,getNavigationProperty:function(){return this.owner.Issue?this.owner.Issue.details.properties.FurtherActions:null},appendQuery:function(){return this.expand("AssignedTo")}}],[]),AddEditIssueComment:r(s,[{name:"IssueComment",kind:"local",type:n.IssueComment}],[]),AddEditIssueType:r(h,[{name:"IssueType",kind:"local",type:n.IssueType}],[]),BrowseEmployees:r(c,[{name:"Employees",kind:"collection",elementType:n.Employee,createQuery:function(n){return this.dataWorkspace.ApplicationData.Employees.filter("("+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", FirstName)")+" or "+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", LastName)")+") or "+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", UserName)")+"")}},{name:"Search",kind:"local",type:String}],[]),BrowseIssues:r(l,[{name:"Issues",kind:"collection",elementType:n.Issue,createQuery:function(n){return this.dataWorkspace.ApplicationData.Issues.filter("(("+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", IssueTitle)")+" or "+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", IssueDescription)")+") or "+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", Priority)")+") or "+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", Status)")+"").expand("IssueType").expand("AssignedTo")}},{name:"Search",kind:"local",type:String}],[]),BrowseIssueTypes:r(a,[{name:"IssueTypes",kind:"collection",elementType:n.IssueType,createQuery:function(n){return this.dataWorkspace.ApplicationData.IssueTypes.filter(""+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", IssueTypeName)")+"")}},{name:"Search",kind:"local",type:String}],[]),BrowseMyFurtherActions:r(v,[{name:"MyFurtherActions",kind:"collection",elementType:n.FurtherAction,createQuery:function(n){return this.dataWorkspace.ApplicationData.MyFurtherActions().filter(""+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", ActionTitle)")+" or "+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", Issue/IssueTitle)")+"").expand("Issue").expand("Issue.IssueType")}},{name:"Search",kind:"local",type:String}],[]),BrowseMyIssues:r(y,[{name:"MyIssues",kind:"collection",elementType:n.Issue,createQuery:function(n){return this.dataWorkspace.ApplicationData.MyIssues().filter("(((("+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", IssueTitle)")+" or "+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", IssueDescription)")+") or "+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", IssueType/IssueTypeName)")+") or "+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", AssignedTo/FirstName)")+") or "+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", AssignedTo/LastName)")+") or "+(n===undefined||n===null?"true":"substringof("+t(n,"String?")+", AssignedTo/UserName)")+"").expand("IssueType").expand("AssignedTo")}},{name:"Search",kind:"local",type:String}],[]),Home:r(p,[{name:"OverdueText",kind:"local",type:String},{name:"DueTodayText",kind:"local",type:String},{name:"InProgressText",kind:"local",type:String},{name:"UnassignedText",kind:"local",type:String}],[]),MobileHome:r(w,[{name:"OverdueText",kind:"local",type:String},{name:"DueTodayText",kind:"local",type:String},{name:"InProgressText",kind:"local",type:String},{name:"UnassignedText",kind:"local",type:String}],[{name:"Blank"}]),showAddEditEmployee:u(function(t,i){var r=Array.prototype.slice.call(arguments,0,1);return n.showScreen("AddEditEmployee",r,i)}),showAddEditFurtherAction:u(function(t,i){var r=Array.prototype.slice.call(arguments,0,1);return n.showScreen("AddEditFurtherAction",r,i)}),showAddEditIssue:u(function(t,i){var r=Array.prototype.slice.call(arguments,0,1);return n.showScreen("AddEditIssue",r,i)}),showAddEditIssueComment:u(function(t,i){var r=Array.prototype.slice.call(arguments,0,1);return n.showScreen("AddEditIssueComment",r,i)}),showAddEditIssueType:u(function(t,i){var r=Array.prototype.slice.call(arguments,0,1);return n.showScreen("AddEditIssueType",r,i)}),showBrowseEmployees:u(function(t){var i=Array.prototype.slice.call(arguments,0,0);return n.showScreen("BrowseEmployees",i,t)}),showBrowseIssues:u(function(t){var i=Array.prototype.slice.call(arguments,0,0);return n.showScreen("BrowseIssues",i,t)}),showBrowseIssueTypes:u(function(t){var i=Array.prototype.slice.call(arguments,0,0);return n.showScreen("BrowseIssueTypes",i,t)}),showBrowseMyFurtherActions:u(function(t){var i=Array.prototype.slice.call(arguments,0,0);return n.showScreen("BrowseMyFurtherActions",i,t)}),showBrowseMyIssues:u(function(t){var i=Array.prototype.slice.call(arguments,0,0);return n.showScreen("BrowseMyIssues",i,t)}),showHome:u(function(t){var i=Array.prototype.slice.call(arguments,0,0);return n.showScreen("Home",i,t)}),showMobileHome:u(function(t){var i=Array.prototype.slice.call(arguments,0,0);return n.showScreen("MobileHome",i,t)})})}(msls.application),myapp.FurtherAction.created=function(n){n.PercentCompleted==0},myapp.IssueComment.created=function(n){n.CommentDate=new Date},myapp.AddEditEmployee.created=function(n){var t,i;n.Employee.LastName!==undefined?(t=n.Employee.LastName,i=n.Employee.FirstName,n.details.displayName="Edit "+i+" "+t):n.details.displayName="Add New Employee",myapp.permissions["LightSwitchApplication:CanEditEmployees"]?(n.findContentItem("DetailsTab").isReadOnly=!1,n.findContentItem("IssueAssignmentsTab").isReadOnly=!1,n.findContentItem("FurtherActionsTab").isReadOnly=!1):(n.findContentItem("DetailsTab").isReadOnly=!0,n.findContentItem("IssueAssignmentsTab").isReadOnly=!0,n.findContentItem("FurtherActionsTab").isReadOnly=!0)},myapp.AddEditFurtherAction.created=function(n){n.findContentItem("DetailsTab").isReadOnly=myapp.permissions["LightSwitchApplication:CanEditFurtherActions"]?!1:!0},myapp.AddEditIssue.created=function(n){myapp.permissions["LightSwitchApplication:CanEditIssues"]?(n.findContentItem("DetailsTab").isReadOnly=!1,n.findContentItem("ImpactTab").isReadOnly=!1,n.findContentItem("CorrectiveActionTab").isReadOnly=!1,n.findContentItem("PreventativeActionTab").isReadOnly=!1,n.findContentItem("FurtherActionsTab").isReadOnly=!1,n.findContentItem("IssueCommentsTab").isReadOnly=!1):(n.findContentItem("DetailsTab").isReadOnly=!0,n.findContentItem("ImpactTab").isReadOnly=!0,n.findContentItem("CorrectiveActionTab").isReadOnly=!0,n.findContentItem("PreventativeActionTab").isReadOnly=!0,n.findContentItem("FurtherActionsTab").isReadOnly=!0,n.findContentItem("IssueCommentsTab").isReadOnly=!0)},myapp.AddEditIssueComment.created=function(n){n.findContentItem("DetailsTab").isReadOnly=myapp.permissions["LightSwitchApplication:CanEditIssueComments"]?!1:!0},myapp.AddEditIssueType.created=function(n){n.findContentItem("DetailsTab").isReadOnly=myapp.permissions["LightSwitchApplication:CanEditIssueTypes"]?!1:!0},myapp.BrowseEmployees.created=function(n){n.findContentItem("AddEmployee").isEnabled=myapp.permissions["LightSwitchApplication:CanEditEmployees"]?!0:!1},myapp.BrowseIssues.created=function(n){n.findContentItem("AddIssue").isEnabled=myapp.permissions["LightSwitchApplication:CanEditIssues"]?!0:!1},myapp.BrowseIssueTypes.created=function(n){n.findContentItem("AddIssueType").isEnabled=myapp.permissions["LightSwitchApplication:CanEditIssueTypes"]?!0:!1},myapp.Home.Issues_postRender=function(n){$(n).find("a").css({"background-image":"url(Content/Images/Issues.png)","background-repeat":"no-repeat","background-position":"center",width:"250px",height:"250px"})},myapp.Home.MyIssues_postRender=function(n){$(n).find("a").css({"background-image":"url(Content/Images/MyIssues.png)","background-repeat":"no-repeat","background-position":"center",width:"250px",height:"250px"})},myapp.Home.MyFurtherActions_postRender=function(n){$(n).find("a").css({"background-image":"url(Content/Images/MyFurtherActions.png)","background-repeat":"no-repeat","background-position":"center",width:"250px",height:"250px"})},myapp.Home.Employees_postRender=function(n){$(n).find("a").css({"background-image":"url(Content/Images/Employees.png)","background-repeat":"no-repeat","background-position":"center",width:"250px",height:"250px"})},myapp.Home.IssueTypes_postRender=function(n){$(n).find("a").css({"background-image":"url(Content/Images/IssueTypes.png)","background-repeat":"no-repeat","background-position":"center",width:"250px",height:"250px"})},myapp.Home.OverdueText_postRender=function(n){$(n).css("text-align","left"),$(n).css("font-size","72px"),$(n).css("font-weight","bold"),$(n).css("font-family","'Segoe Light', 'Segoe UI Light', 'Frutiger', 'Helvetica Neue', Helvetica, Arial, sans - serif"),$(n).css("color","red"),myapp.activeDataWorkspace.ApplicationData.OverDueIssues().execute().then(function(t){n.textContent=CountIssues(t).toString()})},myapp.Home.DueTodayText_postRender=function(n){$(n).css("text-align","left"),$(n).css("font-size","72px"),$(n).css("font-weight","bold"),$(n).css("font-family","'Segoe Light', 'Segoe UI Light', 'Frutiger', 'Helvetica Neue', Helvetica, Arial, sans - serif"),$(n).css("color","orange"),myapp.activeDataWorkspace.ApplicationData.IssuesDueToday().execute().then(function(t){n.textContent=CountIssues(t).toString()})},myapp.Home.InProgressText_postRender=function(n){$(n).css("text-align","left"),$(n).css("font-size","72px"),$(n).css("font-weight","bold"),$(n).css("font-family","'Segoe Light', 'Segoe UI Light', 'Frutiger', 'Helvetica Neue', Helvetica, Arial, sans - serif"),$(n).css("color","green"),myapp.activeDataWorkspace.ApplicationData.InProgressIssues().execute().then(function(t){n.textContent=CountIssues(t).toString()})},myapp.Home.UnassignedText_postRender=function(n){$(n).css("text-align","left"),$(n).css("font-size","72px"),$(n).css("font-weight","bold"),$(n).css("font-family","'Segoe Light', 'Segoe UI Light', 'Frutiger', 'Helvetica Neue', Helvetica, Arial, sans - serif"),$(n).css("color","blue"),myapp.activeDataWorkspace.ApplicationData.UnassignedIssues().execute().then(function(t){n.textContent=CountIssues(t).toString()})},myapp.Home.StatsGroup_postRender=function(n){$(n).css("margin-left","30px")},myapp.Home.created=function(){$.getJSON("../UserPermissions/UserPermissions/",function(n){myapp.permissions=n})},myapp.MobileHome.Issues_postRender=function(n){$(n).find("a").css({"background-image":"url(Content/Images/MobileIssues.png)","background-repeat":"no-repeat","background-position":"center",width:"90px",height:"90px"})},myapp.MobileHome.MyIssues_postRender=function(n){$(n).find("a").css({"background-image":"url(Content/Images/MobileMyIssues.png)","background-repeat":"no-repeat","background-position":"center",width:"90px",height:"90px"})},myapp.MobileHome.MyFurtherActions_postRender=function(){},myapp.MobileHome.Employees_postRender=function(n){$(n).find("a").css({"background-image":"url(Content/Images/MobileMyFurtherActions.png)","background-repeat":"no-repeat","background-position":"center",width:"90px",height:"90px"})},myapp.MobileHome.IssueTypes_postRender=function(n){$(n).find("a").css({"background-image":"url(Content/Images/MobileIssueTypes.png)","background-repeat":"no-repeat","background-position":"center",width:"90px",height:"90px"})},myapp.MobileHome.OverdueText_postRender=function(n){$(n).css("text-align","left"),$(n).css("font-size","48px"),$(n).css("font-weight","bold"),$(n).css("font-family","'Segoe Light', 'Segoe UI Light', 'Frutiger', 'Helvetica Neue', Helvetica, Arial, sans - serif"),$(n).css("color","red"),myapp.activeDataWorkspace.ApplicationData.OverDueIssues().execute().then(function(t){n.textContent=CountIssues(t).toString()})},myapp.MobileHome.StatsGroup_postRender=function(n){$(n).css("margin-left","10px")},myapp.MobileHome.DueTodayText_postRender=function(n){$(n).css("text-align","left"),$(n).css("font-size","48px"),$(n).css("font-weight","bold"),$(n).css("font-family","'Segoe Light', 'Segoe UI Light', 'Frutiger', 'Helvetica Neue', Helvetica, Arial, sans - serif"),$(n).css("color","orange"),myapp.activeDataWorkspace.ApplicationData.IssuesDueToday().execute().then(function(t){n.textContent=CountIssues(t).toString()})},myapp.MobileHome.InProgressText_postRender=function(n){$(n).css("text-align","left"),$(n).css("font-size","48px"),$(n).css("font-weight","bold"),$(n).css("font-family","'Segoe Light', 'Segoe UI Light', 'Frutiger', 'Helvetica Neue', Helvetica, Arial, sans - serif"),$(n).css("color","green"),myapp.activeDataWorkspace.ApplicationData.InProgressIssues().execute().then(function(t){n.textContent=CountIssues(t).toString()})},myapp.MobileHome.UnassignedText_postRender=function(n){$(n).css("text-align","left"),$(n).css("font-size","72px"),$(n).css("font-weight","bold"),$(n).css("font-family","'Segoe Light', 'Segoe UI Light', 'Frutiger', 'Helvetica Neue', Helvetica, Arial, sans - serif"),$(n).css("color","blue"),myapp.activeDataWorkspace.ApplicationData.UnassignedIssues().execute().then(function(t){n.textContent=CountIssues(t).toString()})};